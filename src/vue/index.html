<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.3/vue.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.0.3/vue-resource.min.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDcEkMFV_WyhNdZrr8VLaCYOw4FP75u748"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">

<style>
    ::-webkit-scrollbar {
        display: none;
    }

    html {
        background: #f6f6f6;
        overflow: hidden;
    }

    body {
        background: white;
        margin: 0;
        padding: 0;
    }

    .top {
        position: fixed;
        top: 0px;
        width: 100%;
        display: block;
        background: white;
        padding: 5px;
        height: 85px;
        color: #ef835d;
        font-size: 200%;
        text-align: center;
        border-bottom: 1px solid #d1d1d1;
        box-shadow: 0 1px 2px rgba(0, 0, 0, .1);
    }

    .middle {
        background: #f6f6f6;
        /*margin-top: 50px;*/
        width: 100%;
        height: 100%;
        color: #ef835d;
        color: black;
        font-size: 200%;
        text-align: center;
        overflow-y: scroll;
        border-top: 1px solid #d1d1d1;
    }

    .bottom {
        position: fixed;
        bottom: 0px;
        width: 100%;
        /*background: red;*/
        background: #01579B;
        padding: 5px;
        height: 40px;
        color: white;
        font-size: 30px;
        text-align: center;
        border-top: 1px solid #d1d1d1;
    }

    .sidenav {
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.2s;
        padding-top: 60px;
        box-shadow: rgba(0, 0, 0, 0.35) 3px 0px 10px 0px;
    }

    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.2s;
    }

    .sidenav a:hover {
        color: #f1f1f1;
    }

    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 5px;
        font-size: 36px;
        margin-left: 50px;
    }

    #main {
        transition: margin-left .2s;
    / / padding: 16 px;
    }

    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }

        .sidenav a {
            font-size: 18px;
        }
    }

    ul {
        padding-inline-start: 0;
        font-size: 25px;
        /*text-shadow: #000 0.15em 0.15em 0.15em;*/
    }

    li {
        list-style-type: none;
        color: white;
        padding: 20px;
        border-bottom: solid 1px black;
    }

    li:hover {
        background: whitesmoke;
        color: black;
    }

    .active {
        background: white;
        color: black;
    }
</style>

<div id="app">
    <div id="mySidenav" class="sidenav">
        <div style="color: white;margin-top: -48px;margin-left: 12px;font-size: 30px;width: 200px;">
            VU-Demo
        </div>
        <ul>
            <a href="" class="closebtn" onclick="event.preventDefault();closeNav()"> &times;</a>

            <li v-on:click="changeRoute('chat')" v-bind:class="{ active: chat }">
                <i class="fas fa-comments"></i><span style="margin: 15px;">Chat</span></li>

            <li v-on:click="changeRoute('employees')" v-bind:class="{ active: employees }">
                <i class="fas fa-user-friends"></i><span style="margin: 15px;">Employees</span></li>

            <li v-on:click="changeRoute('employees-add')" v-bind:class="{ active: add }">
                <i class="fa fa-fw fa-plus"></i><span style="margin: 15px;">Add emp</span></li>

            <li v-on:click="changeRoute('goods')" v-bind:class="{ active: goods }">
                <i class="fas fa-warehouse"></i><span style="margin: 15px;">Goods</span></li>

            <li v-on:click="changeRoute('goods-table')" v-bind:class="{ active: gtable }">
                <i class="fa fa-fw fa-table"></i><span style="margin: 15px;">Goods table</span></li>

            <li v-on:click="changeRoute('goods-add')" v-bind:class="{ active: add }">
                <i class="fa fa-fw fa-plus"></i><span style="margin: 15px;">Goods add</span></li>

            <li v-on:click="changeRoute('phones')" v-bind:class="{ active: phones }">
                <i class="fas fa-phone"></i><span style="margin: 15px;">Phones</span></li>

            <li v-on:click="changeRoute('map')" v-bind:class="{ active: map }">
                <i class="fa fa-fw fa-map"></i><span style="margin: 15px;">Map</span></li>

            <li v-on:click="emitEvent('pos')" v-bind:class="{ active: pos }" v-if="map">
                <i class="fas fa-map-marker-alt"></i><span style="margin: 15px;">Position</span></li>

            <li v-on:click="changeRoute('box')" v-bind:class="{ active: box }">
                <i class="fa fa-fw fa-music"></i><span style="margin: 15px;">Box</span></li>
        </ul>
    </div>

    <div id="main">
        <div class="middle">
            <router-view></router-view>
        </div>
    </div>
</div>
</div>

<script>
    const appConfig = new Vue();

    const Goods = {
        template: `
        <div>
            <div class="top"><top></top></div>
               <goods-items></goods-items>
            <div class="bottom"><bottom></bottom></div>
        </div>`
    };
    const GoodsTable = {
        template: `
                    <div>
                        <div class="top"><top></top></div>
                           <goods-items-table></goods-items-table>
                        <div class="bottom"><bottom></bottom></div>
                    </div>`
    };
    const GoodsEdit = {template: '<goods-edit></goods-edit>'};
    const GoodsAdd = {template: '<goods-add></goods-add>'};

    const GoogleMap = {
        template: `
                    <div>
                        <div class="top"><top-map></top-map></div>
                        <div style="margin-top: 96px;"><google-map></google-map></div>
                    </div>`
    };

    const Phones = {
        template: `
                    <div>
                        <div class="top"><top></top></div>
                            <phones-items></phones-items>
                        <div class="bottom"><bottom></bottom></div>
                    </div>`
    };
    const PhoneShow = {template: '<phone-show></phone-show>'};

    const Employees = {
        template: `
                    <div>
                        <div class="top"><top></top></div>
                            <employees-items></employees-items>
                        <div class="bottom"><bottom></bottom></div>
                    </div>`
    };
    const EmployeesEdit = {template: '<employees-edit></employees-edit>'};
    const EmployeesAdd = {template: '<employees-add></employees-add>'};

    const Box = {
        template: `
        <div>
            <div class="top"><top></top></div>
               <box-items></box-items>
            <div class="bottom"><bottom></bottom></div>
        </div>`
    };
    const BoxShow = {template: '<box-show></box-show>'};

    const Chat = {
        template: `
        <div>
            <div class="top"><top></top></div>
                <chat-items></chat-items>
            <div class="bottom"><bottom></bottom></div>
        </div>`
    };

    Vue.component('top', {
        template: `<div>
        <div style="float: left; margin: 20px; margin-top: 4px;">
                <span style="font-size:30px;cursor:pointer; color: black" onclick="openNav()">&#9776;</span>
        </div>
        <div style="margin-top: 15px; color: red; font-size: 50px;margin-right: 100px;">
            <form class="search-form" id="search" style="">
                <label>
                    <input type="text" style="font-size: 24px;height: 50px; width1: 400px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px;outline:none;"
                        placeholder="Search by name"
                        v-model="searchQuery" v-on:click="searchClear" v-on:keyup="changeView" v-on:keyup.enter="goSearch">
                </label>
                <div style="margin-top: -39px;font-size: 30px;margin-left: 230px;color: black;margin-right: -60px;" v-on:click="goSearch"><i class="fa fa-fw fa-search"></i></div>
            </form>
        </div>
        </div>`,
        data() {
            return {
                searchQuery: '',
            };
        },
        methods: {
            changeView() {
                let route;
                switch (appConfig.route) {
                    case "employees":
                        route = 'searchQueryEmployees';
                        break;
                    case "goods":
                        route = 'searchQueryGoods';
                        break;
                    case "phones":
                        route = 'searchQueryPhones';
                        break;
                    case "box":
                        route = 'searchQueryBox';
                        break;
                }
                appConfig.$emit(route, this.searchQuery);
            },
            searchClear() {
                this.searchQuery = '';
                this.changeView();
            },
            goSearch() {
                if (appConfig.route === 'box') {
                    appConfig.$emit('searchQueryITunes', this.searchQuery);
                }
            }
        },
    });
    Vue.component('top-map', {
        template: `<div>
        <div style="float: left; margin: 20px; margin-top: 4px;">
                <span style="font-size:30px;cursor:pointer; color: black" onclick="openNav()">&#9776;</span>
        </div>
        <div style="margin-top: 15px; color: #01579B; font-size: 50px;margin-right: 100px;">
            Google Maps API Demo
        </div>
        </div>`,
        data() {
            return {
                searchQuery: '',
            };
        },
        methods: {
            changeView() {
                appConfig.$emit('searchQuery', this.searchQuery);
            },
            searchClear() {
                this.searchQuery = '';
                appConfig.$emit('searchQuery', this.searchQuery);
            },
        },
    });
    Vue.component('bottom', {
        template: `<div>Records: {{count}}</div>`,
        data() {
            return {
                count: 0,
            };
        },
        created() {
            appConfig.$on('itemsCount', itemsCount => {
                this.count = itemsCount;
            });
        },
        methods: {},
    });

    Vue.component('employees-items', {
        template: `<div>
        <div v-if="loading">
            <div style="position: relative; top: 250px; -webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                <img src="./loading.gif" alt="">
            </div>
        </div>
        <div v-if="!loading">
            <div style="margin-top: 100px;margin-bottom: 50px;">
                <ul><li style="color: black;" v-for="item in items" v-on:click="showDetails(item)">{{ item.id }} - {{ item.employee_name }} - {{ item.employee_age }} - {{ item.employee_salary }}</li></ul>
            </div>
        </div>
        <div v-if="error">
            Server error - try again
        </div>
        </div>`,
        data: function () {
            return {
                items: [],
                searchQuery: '',
                filteredItems: [],
                loading: true,
                error: false,
            };
        },
        created() {
            this.fetchData();
            appConfig.$on('searchQueryEmployees', searchQuery => {
                let arr = [].concat(appConfig.items);
                let items = arr.filter((el) => el.employee_name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1);
                this.filteredItems = items;
                this.items = items;

                appConfig.$emit('itemsCount', items.length);
                if (searchQuery === '') {
                    this.items = appConfig.items;
                    this.filteredItems = appConfig.items;
                }
            });
        },
        methods: {
            fetchData() {
                appConfig.message = 'Loading...';
                this.$http.get('http://dummy.restapiexample.com/api/v1/employees')
                    .then(result => {
                        this.items = JSON.parse(result.data);
                        this.filteredItems = JSON.parse(result.data);
                        appConfig.items = this.filteredItems;
                        this.loading = false;
                        appConfig.$emit('itemsCount', this.items.length);
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            showDetails(item) {
                appConfig.item = item;
                this.$router.push('employees-edit');
            },
        },
    });
    Vue.component('employees-edit', {
        template: `<div style="text-align: center;margin-top: 120px;">
            <div style="font-size: 40px;color: black;font-weight: bolder;margin: 20px;">
                {{ title }}
            </div>

            <span style="font-size: 24px; color: black;">ID:</span>
            <input readonly style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            v-model="id"><br>

            <span style="font-size: 24px; color: black;margin-left: -33px;">
                Name:
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Name"
            v-on:keypress="clearWarning"
            v-model="employee_name" ><br>

            <span style="font-size: 24px; color: black;margin-left: -19px;">
                Age:
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Age"
            v-on:keypress="clearWarning"
            v-model="employee_age" ><br>

            <span style="font-size: 24px; color: black;margin-left: -41px;">
                Salary:
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Salary"
            v-on:keypress="clearWarning"
            v-model="employee_salary" ><br>

            <div style="font-weight: bold; font-size: 18px; color: #dc3545; margin-bottom: 20px; text-align: center;">
                <span v-show="invalidValue" style="margin-left: 0px;">Value required - please provide.</span>
            </div>

            <button style="font-size: 24px;height: 50px;width: 150px;border-radius: 5px;background: #01579B;color: white;outline:none;"
            v-on:click="updateItem">
                Update
            </button>

            <button style="font-size: 24px;height: 50px;width: 150px;border-radius: 5px;background: #01579B;color: white;outline:none;"
            v-on:click="deleteItem">
                Delete
            </button><br>

            <button style="font-size: 24px;height: 50px;width: 150px;border-radius: 5px;background: #01579B;color: white;outline:none;margin-top: 20px;"
            v-on:click="goBack">
                Back
            </button>

            <div v-if="loading">
                <div style="margin-top: -55px;-webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                    <img src="./loading.gif" alt="">
                </div>
            </div>

            <div v-if="error" style="margin-top: 25px;">
                Server error - try again
            </div>
        </div>`,
        data: function () {
            return {
                id: '',
                title: '',
                employee_name: '',
                employee_age: '',
                employee_salary: '',
                invalidValue: false,
                error: false,
                loading: false,
            };
        },
        created() {
            if (!appConfig.item) {
                this.$router.push('/employees');
            } else {
                this.init();
            }
        },
        methods: {
            init() {
                this.id = appConfig.item.id;
                this.title = appConfig.item.employee_name;
                this.employee_name = appConfig.item.employee_name;
                this.employee_age = appConfig.item.employee_age;
                this.employee_salary = appConfig.item.employee_salary;
                appConfig.$emit('itemsCount', 1);
            },
            goBack() {
                this.$router.push('/employees');
            },
            updateItem() {
                if (this.employee_name === '') {
                    this.invalidValue = true;
                }

                if (this.employee_age === '') {
                    this.invalidValue = true;
                }

                if (this.employee_salary === '') {
                    this.invalidValue = true;
                }

                if (this.invalidValue) {
                    return;
                }

                this.loading = true;
                this.$http.put('http://dummy.restapiexample.com/api/v1/update/' + this.id,
                    {
                        name: this.employee_name,
                        age: this.employee_age,
                        salary: this.employee_salary,
                    })
                    .then(result => {
                        this.$router.push('/employees');
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            deleteItem() {
                this.loading = true;
                this.$http.delete('http://dummy.restapiexample.com/api/v1/delete/' + this.id)
                    .then(result => {
                        this.$router.push('/employees');
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            clearWarning() {
                this.invalidValue = false;
            },
        },
    });
    Vue.component('employees-add', {
        props: ['item'],
        template: `<div style="text-align: center;margin-top: 120px;">
        <div style="font-size: 40px;
                        color: black;
                        font-weight: bolder;
                        margin: 20px;">New record</div>

            <!--<span style="font-size: 24px; color: black;margin-left: -33px;">Name:</span>-->
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;
            border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;
            width: 450px;outline:none;margin-right: 0px;"
            placeholder="Name"
            v-on:keypress="clearWarning"
            v-model="employee_name" ><br>

            <!--<span style="font-size: 24px; color: black;margin-left: -19px;">Age:</span>-->
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;
            border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;
            width: 450px;outline:none;margin-right: 0px;"
            placeholder="Age"
            v-on:keypress="clearWarning"
            v-model="employee_age" ><br>

            <!--<span style="font-size: 24px; color: black;margin-left: -41px;">Salary:</span>-->
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;
            border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;
            width: 450px;outline:none;margin-right: 0px;"
            placeholder="Salary"
            v-on:keypress="clearWarning"
            v-model="employee_salary"><br>

            <div style="font-weight: bold; font-size: 18px; color: #dc3545; margin-top: 0px; text-align: center;">
                <span v-show="invalidValue" style="margin-left: 0px;">Value required - please provide.</span>
            </div>

            <button style="font-size: 24px;
                            height: 50px;
                            width: 150px;
                            border-radius: 5px;
                            background: #01579B;
                            color: white;outline:none;"
            v-on:click="addItem">Submit</button>

            <button style="font-size: 24px;
                            height: 50px;
                            width: 150px;
                            border-radius: 5px;
                            background: #01579B;
                            color: white;outline:none;margin-top: 20px;"
            v-on:click="goBack">Back</button>

            <div v-if="loading">
                <div style="margin-top: -55px;-webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                    <img src="./loading.gif" alt="">
                </div>
            </div>

            <div v-if="error" style="margin-top: 25px;">
                Server error - try again
            </div>
        </div>`,
        data: function () {
            return {
                id: '',
                title: '',
                employee_name: '',
                employee_age: '',
                employee_salary: '',
                invalidValue: false,
                error: false,
                loading: false,
            };
        },
        created() {
            this.init();
        },
        methods: {
            init() {
                appConfig.$emit('itemsCount', 1);
            },
            goBack() {
                this.$router.push('/employees');
            },
            addItem() {
                if (this.employee_name === '') {
                    this.invalidValue = true;
                }

                if (this.employee_age === '') {
                    this.invalidValue = true;
                }

                if (this.employee_salary === '') {
                    this.invalidValue = true;
                }

                if (this.invalidValue) {
                    return;
                }

                this.loading = true;
                this.$http.post('http://dummy.restapiexample.com/api/v1/create',
                    {
                        name: this.employee_name,
                        age: this.employee_age,
                        salary: this.employee_salary,
                    })
                    .then(result => {
                        this.$router.push('/employees');
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            clearWarning() {
                this.invalidValue = false;
            },
        },
    });

    Vue.component('goods-items', {
        template: `<div>
        <div v-if="loading">
            <div style="position: relative; top: 250px; -webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                <img src="./loading.gif" alt="">
            </div>
        </div>
        <div v-if="!loading">
            <div style="margin-top: 100px;margin-bottom: 50px;">
                <ul><li style="color: black;" v-for="item in items" v-on:click="showDetails(item)">{{ item.name }} - {{ item.price }}</li></ul>
            </div>
        </div>
        <div v-if="error">
            Server error - try again
        </div>
        </div>`,
        data: function () {
            return {
                items: [],
                searchQuery: '',
                filteredItems: [],
                loading: true,
                error: false,
            }
        },
        created() {
            this.fetchData();
            appConfig.$on('searchQueryGoods', searchQuery => {
                let arr = [].concat(appConfig.items);
                let items = arr.filter((el) => el.name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1);
                this.filteredItems = items;
                this.items = items;

                appConfig.$emit('itemsCount', items.length);
                if (searchQuery === '') {
                    this.items = appConfig.items;
                    this.filteredItems = appConfig.items;
                }
            });
        },
        methods: {
            fetchData() {
                appConfig.message = 'Loading...';
                this.$http.get('http://ui-warehouse.herokuapp.com/api/goods/get')
                    .then(result => {
                        this.items = result.data.sort(this.sort);
                        this.filteredItems = result.data.sort(this.sort);
                        appConfig.items = this.filteredItems;
                        this.loading = false;
                        appConfig.$emit('itemsCount', this.items.length);
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            sort(a, b) {
                let nameA = a.name.toLowerCase(), nameB = b.name.toLowerCase();
                if (nameA < nameB) {
                    return -1;
                }
                if (nameA > nameB) {
                    return 1;
                }
                return 0;
            },
            showDetails(item) {
                appConfig.item = item;
                this.$router.push('goods-edit');
            },
        }
    });
    Vue.component('goods-items-table', {
        template: `<div>
        <div v-if="loading">
            <div style="position: relative; top: 250px; -webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                <img src="./loading.gif" alt="">
            </div>
        </div>
        <div v-if="!loading">
            <div style="margin-top: 100px;margin-bottom: 50px;">
                <div style="color: black;border:solid 1px;height: 80px;" v-for="item in items" v-on:click1="showDetails(item)">
                    <input v-model="item.id" style="height: 40px;margin: 20px;font-size: 20px;width: 100px;outline:none;" readonly/>
                    <input v-model="item.name" style="height: 40px;margin: 20px;font-size: 20px;width: 400px;"/>
                    <input v-model="item.price" style="height: 40px;margin: 20px;font-size: 20px;width: 100px;"/>
                    <button style="height: 40px;border-radius: 5px;width:100px;font-size:20px;" v-on:click="updateItem(item)">Update</button>
                    <button style="height: 40px;border-radius: 5px;width:100px;font-size:20px;" v-on:click="deleteItem(item)">Delete</button>
                    <button style="height: 40px;border-radius: 5px;width:100px;font-size:20px;" v-on:click="cancel">Cancel</button>
                </div>
            </div>
        </div>
        <div v-if="error">
            Server error - try again
        </div>
      </div>`,
        data: function () {
            return {
                items: [],
                searchQuery: '',
                filteredItems: [],
                loading: true,
                error: false,
            };
        },
        created() {
            this.fetchData();
            appConfig.$on('searchQuery', searchQuery => {
                let arr = [].concat(appConfig.items);
                let items = arr.filter((el) => el.name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1);
                this.filteredItems = items;
                this.items = items;

                appConfig.$emit('itemsCount', items.length);
                if (searchQuery === '') {
                    this.items = appConfig.items;
                    this.filteredItems = appConfig.items;
                }
            });
        },
        methods: {
            fetchData() {
                this.$http.get('http://ui-warehouse.herokuapp.com/api/goods/get')
                    .then(result => {
                        this.items = result.data.sort(this.sort);
                        this.filteredItems = result.data.sort(this.sort);
                        appConfig.items = this.filteredItems;
                        this.loading = false;
                        appConfig.$emit('itemsCount', this.items.length);
                    })
                    .catch(error => {
                        console.log(error)
                        this.error = true;
                        this.loading = false;
                    });
            },
            sort(a, b) {
                let nameA = a.name.toLowerCase(), nameB = b.name.toLowerCase();
                if (nameA < nameB) {
                    return -1;
                }
                if (nameA > nameB) {
                    return 1;
                }
                return 0;
            },
            updateItem(item) {
                this.loading = true;
                this.$http.post('http://ui-warehouse.herokuapp.com/api/goods/update/',
                    {
                        id: item.id,
                        name: item.name,
                        price: item.price,
                        quantity: item.quantity,
                        store: false,
                        description: 'cv'
                    })
                    .then(result => {
                        this.loading = true;
                        this.fetchData();
                    })
                    .catch(error => {
                        this.error = true;
                        //this.loading = false;
                    });
            },
            deleteItem(item) {
                this.loading = true;
                this.$http.post('http://ui-warehouse.herokuapp.com/api/goods/delete',
                    {
                        id: item.id
                    })
                    .then(result => {
                        this.loading = true;
                        this.fetchData();
                    })
                    .catch(error => {
                        this.error = true;
                        //this.loading = false;
                    });
            },
            cancel() {
                this.loading = true;
                this.fetchData();
            },
        },
    });
    Vue.component('goods-edit', {
        props: ['item'],
        template: `<div style="text-align: center;margin-top: 120px;">
            <div style="font-size: 40px;color: black;font-weight: bolder;margin: 20px;">
                {{ title }}
            </div>

            <span style="font-size: 24px; color: black;">ID:</span>
            <input readonly style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            v-model="id"><br>

            <span style="font-size: 24px; color: black;margin-left: -33px;">
                Name:
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Name"
            v-on:keypress="clearWarning"
            v-model="name" ><br>

            <span style="font-size: 24px; color: black;margin-left: -19px;">
                Price:
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Age"
            v-on:keypress="clearWarning"
            v-model="price" ><br>

            <span style="font-size: 24px; color: black;margin-left: -41px;">
                Descrip:
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Salary"
            v-on:keypress="clearWarning"
            v-model="description" ><br>

            <div style="font-weight: bold; font-size: 18px; color: #dc3545; margin-bottom: 20px; text-align: center;">
                <span v-show="invalidValue" style="margin-left: 0px;">Value required - please provide.</span>
            </div>

            <button style="font-size: 24px;height: 50px;width: 150px;border-radius: 5px;background: #01579B;color: white;outline:none;"
            v-on:click="updateItem">
                Update
            </button>

            <button style="font-size: 24px;height: 50px;width: 150px;border-radius: 5px;background: #01579B;color: white;outline:none;"
            v-on:click="deleteItem">
                Delete
            </button><br>

            <button style="font-size: 24px;height: 50px;width: 150px;border-radius: 5px;background: #01579B;color: white;outline:none;margin-top: 20px;"
            v-on:click="goBack">
                Back
            </button>

            <div v-if="loading">
                <div style="margin-top: -55px;-webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                    <img src="./loading.gif" alt="">
                </div>
            </div>

            <div v-if="error" style="margin-top: 25px;">
                Server error - try again
            </div>
        </div>`,
        data: function () {
            return {
                id: '',
                title: '',
                name: '',
                price: '',
                description: '',
                invalidValue: false,
                error: false,
                loading: false,
            };
        },
        created() {
            if (!appConfig.item) {
                this.$router.push('/goods');
            } else {
                this.init();
            }
        },
        methods: {
            init() {
                this.id = appConfig.item.id;
                this.title = appConfig.item.name;
                this.name = appConfig.item.name;
                this.price = appConfig.item.price;
                this.description = appConfig.item.description;
                this.quantity = appConfig.item.quantity;
                appConfig.$emit('itemsCount', 1);
            },
            goBack() {
                this.$router.push('/goods');
            },
            updateItem() {
                if (this.name === '') {
                    this.invalidValue = true;
                }

                if (this.price === '') {
                    this.invalidValue = true;
                }

                if (this.description === '') {
                    this.invalidValue = true;
                }

                if (this.invalidValue) {
                    return;
                }

                this.loading = true;
                this.$http.post('http://ui-warehouse.herokuapp.com/api/goods/update/',
                    {
                        id: this.id,
                        name: this.name,
                        price: this.price,
                        quantity: this.quantity,
                        store: false,
                        description: 'cv'
                    })
                    .then(result => {
                        this.$router.push('/goods');
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            deleteItem() {
                this.loading = true;
                this.$http.post('http://ui-warehouse.herokuapp.com/api/goods/delete',
                    {
                        id: this.id
                    })
                    .then(result => {
                        this.$router.push('/goods');
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            clearWarning() {
                this.invalidValue = false;
            },
        },
    });
    Vue.component('goods-add', {
        props: ['item'],
        template: `<div style="text-align: center;margin-top: 120px;">
        <div style="font-size: 40px;
                        color: black;
                        font-weight: bolder;
                        margin: 20px;">New record</div>

            <!--<span style="font-size: 24px; color: black;margin-left: -33px;">Name:</span>-->
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;
            border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;
            width: 450px;outline:none;margin-right: 0px;"
            placeholder="Name"
            v-on:keypress="clearWarning"
            v-model="name" ><br>

            <!--<span style="font-size: 24px; color: black;margin-left: -19px;">Age:</span>-->
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;
            border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;
            width: 450px;outline:none;margin-right: 0px;"
            placeholder="Price"
            v-on:keypress="clearWarning"
            v-model="price" ><br>

            <!--<span style="font-size: 24px; color: black;margin-left: -41px;">Salary:</span>-->
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;
            border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;
            width: 450px;outline:none;margin-right: 0px;"
            placeholder="Description"
            v-on:keypress="clearWarning"
            v-model="description"><br>

            <div style="font-weight: bold; font-size: 18px; color: #dc3545; margin-top: 0px; text-align: center;">
                <span v-show="invalidValue" style="margin-left: 0px;">Value required - please provide.</span>
            </div>

            <button style="font-size: 24px;
                            height: 50px;
                            width: 150px;
                            border-radius: 5px;
                            background: #01579B;
                            color: white;outline:none;"
            v-on:click="addItem">Submit</button>

            <button style="font-size: 24px;
                            height: 50px;
                            width: 150px;
                            border-radius: 5px;
                            background: #01579B;
                            color: white;outline:none;margin-top: 20px;"
            v-on:click="goBack">Back</button>

            <div v-if="loading">
                <div style="margin-top: -55px;-webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                    <img src="./loading.gif" alt="">
                </div>
            </div>

            <div v-if="error" style="margin-top: 25px;">
                Server error - try again
            </div>
        </div>`,
        data: function () {
            return {
                id: '',
                title: '',
                name: '',
                price: '',
                description: '',
                invalidValue: false,
                error: false,
                loading: false,
            };
        },
        created() {
            this.init();
        },
        methods: {
            init() {
                appConfig.$emit('itemsCount', 1);
            },
            goBack() {
                this.$router.push('/goods');
            },
            addItem() {
                if (this.name === '') {
                    this.invalidValue = true;
                }

                if (this.price === '') {
                    this.invalidValue = true;
                }

                if (this.description === '') {
                    this.invalidValue = true;
                }

                if (this.invalidValue) {
                    return;
                }

                this.loading = true;
                this.$http.post('http://ui-warehouse.herokuapp.com/api/goods/add/',
                    {
                        id: Math.round(Math.random() * 100000000),
                        name: this.name,
                        price: this.price,
                        quantity: 0,
                        store: false,
                        description: this.description
                    })
                    .then(result => {
                        this.$router.push('/goods');
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            clearWarning() {
                this.invalidValue = false;
            },
        },
    });

    Vue.component('phones-items', {
        template: `<div>
        <div v-if="loading">
            <div style="position: relative; top: 250px; -webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                <img src="./loading.gif" alt="">
            </div>
        </div>
        <div v-if="!loading">
            <div style="margin-top: 100px;margin-bottom: 50px;">
                <ul><li style="color: black;" v-for="item in items" v-on:click="showDetails(item)">{{ item.name }} - {{ item.phone }}</li></ul>
            </div>
        </div>
        <div v-if="error">
            Server error - try again
        </div>
        </div>`,
        data: function () {
            return {
                items: [],
                searchQuery: '',
                filteredItems: [],
                loading: true,
                error: false,
            }
        },
        created() {
            this.fetchData();
            appConfig.$on('searchQueryPhones', searchQuery => {
                let arr = [].concat(appConfig.items);
                let items = arr.filter((el) => el.name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1);
                this.filteredItems = items;
                this.items = items;

                appConfig.$emit('itemsCount', items.length);
                if (searchQuery === '') {
                    this.items = appConfig.items;
                    this.filteredItems = appConfig.items;
                }
            });
        },
        methods: {
            fetchData() {
                appConfig.message = 'Loading...';
                this.$http.get('https://ui-base.herokuapp.com/api/items/get')
                    .then(result => {
                        this.items = result.data;
                        this.filteredItems = result.data;
                        appConfig.items = this.filteredItems;
                        this.loading = false;
                        appConfig.$emit('itemsCount', this.items.length);
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            showDetails(item) {
                appConfig.item = item;
                this.$router.push('phone-show');
            },
        }
    });
    Vue.component('phone-show', {
        props: ['item'],
        template: `<div style="text-align: center;margin-top: 120px;">
            <div style="font-size: 40px;color: black;font-weight: bolder;margin: 20px;">
                {{ title }}
            </div>

            <span style="font-size: 24px; color: black;"></span>
            <input readonly style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            v-model="id"><br>

            <span style="font-size: 24px; color: black;margin-left: 0px;">
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Name"
            v-on:keypress="clearWarning"
            v-model="name" ><br>

            <span style="font-size: 24px; color: black;margin-left: 0px;">
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Age"
            v-on:keypress="clearWarning"
            v-model="phone" ><br>

            <span style="font-size: 24px; color: black;margin-left: 0px;">
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Salary"
            v-on:keypress="clearWarning"
            v-model="address" ><br>

            <span style="font-size: 24px; color: black;margin-left: 0px;">
            </span>
            <input style="font-size: 24px;height: 50px;padding: 20px;border-radius: 7px;border: 1px solid rgba(0,0,0,.15);margin-top: 2px; margin-bottom: 20px;width: 450px;outline:none;margin-right: 40px;"
            placeholder="Salary"
            v-on:keypress="clearWarning"
            v-model="index" ><br>

            <div style="font-weight: bold; font-size: 18px; color: #dc3545; margin-bottom: 20px; text-align: center;">
                <span v-show="invalidValue" style="margin-left: 0px;">Value required - please provide.</span>
            </div>

            <button style="font-size: 24px;height: 50px;width: 150px;border-radius: 5px;background: #01579B;color: white;outline:none;margin-top: 20px;"
            v-on:click="goBack">
                Back
            </button>

            <div v-if="loading">
                <div style="margin-top: -55px;-webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                    <img src="./loading.gif" alt="">
                </div>
            </div>

            <div v-if="error" style="margin-top: 25px;">
                Server error - try again
            </div>
        </div>`,
        data: function () {
            return {
                id: '',
                title: '',
                name: '',
                phone: '',
                address: '',
                index: '',
                invalidValue: false,
                error: false,
                loading: false,
            };
        },
        created() {
            if (!appConfig.item) {
                this.$router.push('/phones');
            } else {
                this.init();
            }
        },
        methods: {
            init() {
                this.id = appConfig.item.id;
                this.title = appConfig.item.name;
                this.name = appConfig.item.name;
                this.phone = appConfig.item.phone;
                this.index = appConfig.item.index;
                this.address = appConfig.item.street + ' ' + appConfig.item.house + ', Apt. ' + appConfig.item.apt;
                appConfig.$emit('itemsCount', 1);
            },
            goBack() {
                this.$router.push('/phones');
            },
            clearWarning() {
                this.invalidValue = false;
            },
        },
    });

    Vue.component('googleMap', {
        template: '<div class="middle" id="map"></div>',
        data() {
            return {
                map: '',
                symbolOne: {
                    path: 'M -2,0 0,-2 2,0 0,2 z',
                    strokeColor: 'gold',
                    fillColor: 'gold',
                    fillOpacity: 1,
                    scale: 3,
                },
                image: '../img/blue-circle.png',
                locations: [
                    ['<div style="margin: 0px; color: black"><img src="../img/blue-circle.png" style="margin: 15px; width: 200px"><br><b>Point1</b></div>', 49.093086, 8.533068, 1],
                    ['Point2', 49.147995, 8.559998, 2],
                    ['Point3', 49.116544, 8.551161, 3]
                ],
                flightPath: new google.maps.Polyline({
                    path: [
                        {lat: 49.093086, lng: 8.533068},
                        {lat: 49.106580, lng: 8.544306},
                        {lat: 49.116544, lng: 8.551161},
                        {lat: 49.128808, lng: 8.550718},
                        {lat: 49.133488, lng: 8.551667},
                        {lat: 49.147995, lng: 8.559998},
                    ],
                    geodesic: true,
                    strokeColor: '#01579B',
                    strokeOpacity: 1.0,
                    strokeWeight: 6
                })
            }
        },
        created() {
            setTimeout(this.init, 500);
            appConfig.$on('pos', searchQuery => {
                this.getPos();
            });
        },
        methods: {
            init() {
                map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 13,
                    center: new google.maps.LatLng(49.124966, 8.552490),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                    //mapTypeId: google.maps.MapTypeId.SATELLITE
                });

                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(49.124966, 8.552490),
                    draggable: true,
                    animation: google.maps.Animation.BOUNCE,
                    icon: this.symbolOne,
                    map: map
                });
                appConfig.map = true;
                this.setPoints();
                this.showRoutes()
            },
            setPoints() {
                let infowindow = new google.maps.InfoWindow();

                for (var i = 0; i < this.locations.length; i++) {
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(this.locations[i][1], this.locations[i][2]),
                        map: map
                    });
                    var locations = [].concat(this.locations);
                    google.maps.event.addListener(marker, 'click', (function (marker, i) {
                        return function () {
                            infowindow.setContent(locations[i][0]);
                            infowindow.open(map, marker);
                        }
                    })(marker, i));
                }
            },
            showRoutes() {
                this.flightPath.setMap(map);
            },
            getPos() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(this.showPosition);
                } else {
                    alert("Geolocation is not supported by this browser.");
                }
            },

            showPosition(position) {
                if (marker) {
                    marker.setMap(null);
                }

                let lat = position.coords.latitude;
                let lng = position.coords.longitude;

                map.setCenter(new google.maps.LatLng(lat, lng));
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(lat, lng),
                    draggable: true,
                    //animation: google.maps.Animation.BOUNCE,
                    icon: this.image,
                    map: map
                });
            }
        },
    });

    Vue.component('box-items', {
        template: `<div>
        <div v-if="loading">
            <div style="position: relative; top: 250px; -webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                <img src="./loading.gif" alt="">
            </div>
        </div>
        <div v-if="!loading">
            <div style="margin-top: 95px;margin-bottom: 50px;">

                    <div style="color: black;" v-for="item in items" v-on:click="showDetails(item)">
                        <div style="border: 1px solid; padding: 10px; height: 150px;font-size: 25px;font-family: cursive;">
                            <div style="width: 20%;float: left;">
                                <img :src="item.artworkUrl100.replace('100x100bb.jpg', '500x500bb.jpg')"
                                     style="width: 140px; height: 150px; border-radius: 20px">
                            </div>
                            <div style="float: left;margin-top: 50px;width: 80%;">
                                <div style="float: left;width: 40%; text-overflow: ellipsis;">{{ item.trackName }} </div>
                                <div style="float: left;width: 20%;">{{ item.primaryGenreName }} </div>
                                <div style="float: left;width: 20%;">{{ item.releaseDate.split('-')[0] }} </div>
                                <div style="float: left;width: 20%;">{{ item.kind }} </div>
                            </div>
                       </div>
                    </div>

            </div>
        </div>
        <div v-if="error">
            Server error - try again
        </div>
        </div>`,

        data() {
            return {
                items: [],
                filteredItems: [],
                recordsCount: 20,
                positionY: 0,
                status: 'loading',
                clicked: false,
                loading: true,
                error: false,
                searchQuery: 'marvel'
            }
        },
        created() {
            this.fetchData();
            appConfig.$on('searchQueryBox', searchQuery => {
                let arr = [].concat(appConfig.items);
                let items = arr.filter((el) => el.trackName.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1);
                this.filteredItems = items;
                this.items = items;

                appConfig.$emit('itemsCount', items.length);
                if (searchQuery === '') {
                    this.items = appConfig.items;
                    this.filteredItems = appConfig.items;
                }
            });
            appConfig.$on('searchQueryITunes', searchQuery => {
                this.loading = true;
                this.$http.jsonp('https://itunes.apple.com/search?media=all&term=' + searchQuery)
                    .then((response) => response.json())
                    .then(result => {
                        this.items = result.results;
                        this.filteredItems = result.results;
                        appConfig.items = this.filteredItems;
                        this.loading = false;
                        appConfig.$emit('itemsCount', this.items.length);
                    });

                appConfig.$emit('itemsCount', this.items.length);
                if (searchQuery === '') {
                    this.items = appConfig.items;
                    this.filteredItems = appConfig.items;
                }
            });

        },
        methods: {
            fetchData(searchQuery) {
                this.$http.jsonp('https://itunes.apple.com/search?media=all&term=' + this.searchQuery)
                    .then((response) => response.json())
                    .then(result => {
                        this.items = result.results;
                        this.filteredItems = result.results;
                        appConfig.items = this.filteredItems;
                        this.loading = false;
                        appConfig.$emit('itemsCount', this.items.length);
                    })
                    .catch(error => {
                        this.error = true;
                        this.loading = false;
                    });
            },
            showDetails(item) {
                appConfig.box = item;
                localStorage.setItem('item', JSON.stringify(item));
                this.$router.push('box-show');
            }
        }


    });
    Vue.component('box-show', {
        template: `<div>
            <div v-if="loading">
                <div style="position: relative; top: 250px; -webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                    <img src="./loading.gif" alt="">
                </div>
            </div>
            <div v-if="!loading">
                <div style="margin: 50px 20px">
                  <img :src="this.pic.replace('100x100bb.jpg', '500x500bb.jpg')"
                       style="width: 500px; height: 500px; border-radius: 20px; margin-bottom: 20px;"
                       v-on:click="playMedia">

                  <div style="font-size: 40px; font-weight: bold; font-family: cursive; margin-bottom: 10px;">
                    <div>{{ name }}</div>
                  </div>
                  <div style="font-size: 30px; font-weight: bold; font-family: cursive; margin-bottom: 10px;">
                    <div>{{ artistName }}</div>
                  </div>
                  <div style="font-size: 30px; font-weight: bold; font-family: cursive; margin-bottom: 10px;">
                    <div>{{ collectionName }}</div>
                  </div>
                  <div style="font-size: 20px; font-weight: bold; margin-bottom: 10px; font-family: 'serif';">
                    <div>{{ longDescription }}</div>
                  </div>
                  <div style="font-size: 30px; font-weight: bold; font-family: cursive; margin-bottom: 10px;">
                    <div>{{ primaryGenreName }}</div>
                  </div>
                  <div style="font-size: 30px; font-weight: bold; font-family: cursive; margin-bottom: 10px;">
                    <div>{{ releaseDate }}</div>
                  </div>
                  <div style="font-size: 30px; font-weight: bold; font-family: cursive; margin-bottom: 30px;">
                    <div>{{ kind }}</div>
                  </div>

                   <button style="font-size: 24px;height: 50px;width: 400px;border-radius: 5px;background: #01579B;color: white;outline:none;margin-top: 0px;"
                    v-on:click="playMedia">
                        Play
                   </button>
                </div>
            </div>
            <div v-if="error">
                Server error - try again
            </div>
        </div>`,

        data() {
            return {
                name: '',
                url: '',
                pic: '',
                kind: '',
                artistName: '',
                collectionName: '',
                primaryGenreName: '',
                releaseDate: '',
                longDescription: '',
                loading: false,
                error: false,
            }
        },
        created() {
            let item = JSON.parse(localStorage.getItem('item'));
            appConfig.box = Object.assign({}, item);

            if (!appConfig.box) {
                this.$router.push('/box')
            } else {
                this.setData()
            }
        },
        methods: {
            setData() {
                if (appConfig) {
                    if (appConfig.box) {
                        this.name = appConfig.box.trackName;
                        this.artistName = appConfig.box.artistName;
                        this.url = appConfig.box.previewUrl;
                        this.pic = appConfig.box.artworkUrl100;
                        this.kind = appConfig.box.kind;
                        this.collectionName = appConfig.box.collectionName;
                        this.primaryGenreName = appConfig.box.primaryGenreName;
                        this.releaseDate = appConfig.box.releaseDate.split('-')[0];
                        this.longDescription = appConfig.box.longDescription
                    }
                }
            },
            playMedia() {
                if (appConfig.box.kind === 'podcast') {
                    this.$router.push('/box');
                    return null;
                }
                window.location = this.url
            }
        }
    });

    Vue.component('chat-items', {
        template: `<div v-on:click="goSend()">
        <div v-if="loading">
            <div style="position: relative; top: 250px; -webkit-box-align:center; -webkit-box-pack:center; display:-webkit-box; font-size:54px">
                <img src="./loading.gif" alt="">
            </div>
        </div>
        <div v-if="!loading">
            <div style="margin-top: 95px;margin-bottom: 50px;">

                    <div style="color: black;" v-for="item in items">
                        <div style="border: 1px solid; padding: 10px; height: 150px;font-size: 25px;font-family: cursive;">

                            <div style="float: left;margin-top: 50px;width: 100%;">
                                <div style="float: left;width: 40%; text-overflow: ellipsis;">{{ item.message }} </div>
                                <div style="float: left;width: 20%; text-overflow: ellipsis;">{{ item.date }} </div>
                                <div style="float: left;width: 40%; text-overflow: ellipsis;">{{ item.name }} </div>

                            </div>
                       </div>
                    </div>

            </div>
        </div>
        <div v-if="error">
            Server error - try again
        </div>
        </div>`,
        data() {
            return {
                items: [{name:'started', message:'Chat'}],
                filteredItems: [],
                loading: false,
                error: false,
            };
        },
        created() {
            Notification.requestPermission().then(function(result) {
                /*let notification = new Notification('VU-Demo', {
                    icon: '../img/logo.jpg',
                    body: 'Hey there! Chat is started!',
                });*/
            });

            if (window.ws === undefined) {
                window.ws = new WebSocket('wss://jwt-chat.herokuapp.com');
            }

            ws.onmessage = (e) => {
                let messageObject = e.data;
                if (messageObject.split('###')[0] !== 'still alive') {
                    this.items.unshift({
                        id: +new Date(),
                        name: messageObject.split('###')[1],
                        date: messageObject.split('###')[2],
                        message: messageObject.split('###')[0]
                    });

                    let notification = new Notification('VU-Demo', {
                        icon: '../img/logo.jpg',
                        body: messageObject.split('###')[0],
                    });

                    appConfig.$emit('itemsCount', this.items.length);
                }
            };
        },
        methods: {
            goSend() {
                let messageObject;
                messageObject = 'Test from Demo' + '###' + 'Guest';
                ws.send(messageObject);
            },
        },
    });

    const routes = [
        {path: '/', component: Employees},
        {path: '/employees', component: Employees},
        {path: '/employees-add', component: EmployeesAdd},
        {path: '/employees-edit', component: EmployeesEdit},
        {path: '/goods', component: Goods},
        {path: '/goods-table', component: GoodsTable},
        {path: '/goods-edit', component: GoodsEdit},
        {path: '/goods-add', component: GoodsAdd},
        {path: '/phones', component: Phones},
        {path: '/phone-show', component: PhoneShow},
        {path: '/map', component: GoogleMap},
        {path: '/box', component: Box},
        {path: '/box-show', component: BoxShow},
        {path: '/chat', component: Chat},
    ];

    const router = new VueRouter({
        routes,
    });

    new Vue({
        el: '#app',
        router,
        data: {
            map: false,
            pos: ''
        },
        created() {
            this.init();
            appConfig.route = this.$route.path.split('/')[1];
        },
        methods: {
            init() {
                this.box = appConfig.route === 'box';
                this.employees = appConfig.route === 'employees';
                this.goods = appConfig.route === 'goods';
                this.map = appConfig.route === 'map';
                this.phones = appConfig.route === 'phones';
                this.inline = appConfig.route === 'inline';
                this.add = appConfig.route === 'item-add';
                this.gtable = appConfig.route === 'goods-table';
                this.chat = appConfig.route === 'chat';
            },
            changeRoute(route) {
                closeNav();
                appConfig.route = route;
                this.init();
                this.$router.push('/' + route);
                return false;
            },
            emitEvent(event) {
                appConfig.$emit(event, {});
                this.map = true;
                closeNav();
            }
        },
    });

    function openNav() {
        document.getElementById('mySidenav').style.width = '250px';
    }

    function closeNav() {
        document.getElementById('mySidenav').style.width = '0';
        return false;
    }
</script>

